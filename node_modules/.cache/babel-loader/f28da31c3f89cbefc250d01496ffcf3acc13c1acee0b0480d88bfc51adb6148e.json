{"ast":null,"code":"import axios from \"axios\";\nimport Swal from \"sweetalert2\";\nexport default {\n  data: () => ({\n    competition: {},\n    types: [],\n    Toast: Swal.mixin({\n      toast: true,\n      position: 'top-end',\n      showConfirmButton: false,\n      timer: 1500,\n      timerProgressBar: true,\n      didOpen: toast => {\n        toast.addEventListener('mouseenter', Swal.stopTimer);\n        toast.addEventListener('mouseleave', Swal.resumeTimer);\n      }\n    }),\n    dateTimeMenu: {}\n  }),\n  created() {\n    this.getTypes().then(() => {});\n  },\n  methods: {\n    async getTypes() {\n      await axios.get('/competition-types/').then(res => {\n        this.types = res.data.data;\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    async saveInfo() {\n      let dateStart = `${this.competition.dateStart}T${this.competition.timeStart}:00`;\n      let dateEnd = `${this.competition.dateEnd}T${this.competition.timeEnd}:00`;\n      dateStart = new Date(dateStart);\n      dateEnd = new Date(dateEnd);\n      dateStart = dateStart.toISOString();\n      dateEnd = dateEnd.toISOString();\n      let formData = new FormData();\n      formData.append('nameTm', this.competition.nameTm);\n      formData.append('nameRu', this.competition.nameRu);\n      formData.append('textTm', this.competition.textTm);\n      formData.append('textRu', this.competition.textRu);\n      formData.append('locationTm', this.competition.locationTm);\n      formData.append('locationRu', this.competition.locationRu);\n      formData.append('dateStart', dateStart);\n      formData.append('dateEnd', dateEnd);\n      formData.append('typeId', this.competition.type.id);\n      formData.append('photo', this.competition.file);\n      await axios.post('/competitions/', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(() => {\n        this.Toast.fire({\n          icon: 'success',\n          title: 'Successfully saved'\n        });\n        this.$emit('close-nav-drawer');\n      }).catch(err => {\n        this.Toast.fire({\n          icon: 'error',\n          title: 'Something went wrong'\n        });\n        console.log(err);\n        this.$emit('close-nav-drawer');\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","Swal","data","competition","types","Toast","mixin","toast","position","showConfirmButton","timer","timerProgressBar","didOpen","addEventListener","stopTimer","resumeTimer","dateTimeMenu","created","getTypes","then","methods","get","res","catch","err","console","log","saveInfo","dateStart","timeStart","dateEnd","timeEnd","Date","toISOString","formData","FormData","append","nameTm","nameRu","textTm","textRu","locationTm","locationRu","type","id","file","post","headers","fire","icon","title","$emit"],"sources":["src/components/example/Drawers/CompetitionDrawer.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <v-text-field\r\n        outlined\r\n        dense\r\n        label=\"nameTm\"\r\n        v-model=\"competition.nameTm\"\r\n        class=\"mt-1\"\r\n    />\r\n    <v-text-field\r\n        outlined \r\n        dense\r\n        label=\"nameRu\"\r\n        v-model=\"competition.nameRu\"\r\n    />\r\n    <v-textarea\r\n      outlined\r\n      dense\r\n      label=\"textTm\"\r\n      v-model=\"competition.textTm\"\r\n    />\r\n    <v-textarea\r\n        outlined\r\n        dense\r\n        label=\"textRu\"\r\n        v-model=\"competition.textRu\"\r\n    />\r\n    <v-text-field\r\n        outlined\r\n        dense\r\n        label=\"locationTm\"\r\n        v-model=\"competition.locationTm\"\r\n    />\r\n    <v-text-field\r\n        outlined\r\n        dense\r\n        label=\"locationRu\"\r\n        v-model=\"competition.locationRu\"\r\n    />\r\n\r\n<!--    competition startDateTime    -->\r\n    <v-row no-gutters>\r\n      <v-col cols=\"12\" md=\"6\" sm=\"6\">\r\n        <v-menu\r\n            v-model=\"dateTimeMenu.startDateMenu\"\r\n            :close-on-content-click=\"false\"\r\n            :nudge-right=\"40\"\r\n            transition=\"scale-transition\"\r\n            offset-y\r\n            max-width=\"auto\"\r\n            class=\"mr-1\"\r\n        >\r\n          <template v-slot:activator=\"{ on, attrs }\">\r\n            <v-text-field\r\n                outlined\r\n                dense\r\n                v-model=\"competition.dateStart\"\r\n                label=\"dateStart\"\r\n                readonly\r\n                v-bind=\"attrs\"\r\n                v-on=\"on\"\r\n                class=\"mr-1\"\r\n            ></v-text-field>\r\n          </template>\r\n          <v-date-picker\r\n              v-model=\"competition.dateStart\"\r\n              @input=\"dateTimeMenu.startDateMenu = false\"\r\n              no-title\r\n          />\r\n        </v-menu>\r\n      </v-col>\r\n      <v-col cols=\"12\" md=\"6\" sm=\"6\">\r\n        <v-menu\r\n            v-model=\"dateTimeMenu.startTimeMenu\"\r\n            :close-on-content-click=\"false\"\r\n            :nudge-left=\"40\"\r\n            transition=\"scale-transition\"\r\n            offset-y\r\n            min-width=\"auto\"\r\n        >\r\n          <template v-slot:activator=\"{ on, attrs }\">\r\n            <v-text-field\r\n                outlined\r\n                dense\r\n                v-model=\"competition.timeStart\"\r\n                label=\"timeStart\"\r\n                readonly\r\n                v-bind=\"attrs\"\r\n                v-on=\"on\"\r\n                class=\"ml-1\"\r\n            ></v-text-field>\r\n          </template>\r\n          <v-time-picker\r\n              v-model=\"competition.timeStart\"\r\n              format=\"24hr\"\r\n              @input=\"dateTimeMenu.startTimeMenu = false\"\r\n              no-title\r\n          />\r\n        </v-menu>\r\n      </v-col>\r\n    </v-row>\r\n\r\n\r\n    <!--    competition endDateTime    -->\r\n    <v-row no-gutters>\r\n      <v-col cols=\"12\" md=\"6\" sm=\"6\">\r\n        <v-menu\r\n            v-model=\"dateTimeMenu.endDateMenu\"\r\n            :close-on-content-click=\"false\"\r\n            :nudge-right=\"40\"\r\n            transition=\"scale-transition\"\r\n            offset-y\r\n            min-width=\"auto\"\r\n            class=\"mr-1\"\r\n        >\r\n          <template v-slot:activator=\"{ on, attrs }\">\r\n            <v-text-field\r\n                outlined\r\n                dense\r\n                v-model=\"competition.dateEnd\"\r\n                label=\"dateEnd\"\r\n                readonly\r\n                v-bind=\"attrs\"\r\n                v-on=\"on\"\r\n                class=\"mr-1\"\r\n            ></v-text-field>\r\n          </template>\r\n          <v-date-picker\r\n              v-model=\"competition.dateEnd\"\r\n              @input=\"dateTimeMenu.endDateMenu = false\"\r\n              no-title\r\n          />\r\n        </v-menu>\r\n      </v-col>\r\n      <v-col cols=\"12\" md=\"6\" sm=\"6\">\r\n        <v-menu\r\n            v-model=\"dateTimeMenu.endTimeMenu\"\r\n            :close-on-content-click=\"false\"\r\n            :nudge-left=\"40\"\r\n            transition=\"scale-transition\"\r\n            offset-y\r\n            min-width=\"auto\"\r\n        >\r\n          <template v-slot:activator=\"{ on, attrs }\">\r\n            <v-text-field\r\n                outlined\r\n                dense\r\n                v-model=\"competition.timeEnd\"\r\n                label=\"timeEnd\"\r\n                readonly\r\n                v-bind=\"attrs\"\r\n                v-on=\"on\"\r\n                class=\"ml-1\"\r\n            ></v-text-field>\r\n          </template>\r\n          <v-time-picker\r\n              v-model=\"competition.timeEnd\"\r\n              format=\"24hr\"\r\n              @input=\"dateTimeMenu.endTimeMenu = false\"\r\n              no-title\r\n          />\r\n        </v-menu>\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <v-combobox\r\n        dense\r\n        outlined\r\n        label=\"type\"\r\n        v-model=\"competition.type\"\r\n        :items=\"types\"\r\n        item-text=\"nameTm\"\r\n    />\r\n    <v-file-input\r\n        v-model=\"competition.file\"\r\n        color=\"deep-purple accent-4\"\r\n        label=\"photo\"\r\n        prepend-icon=\"mdi-camera\"\r\n        outlined\r\n        hide-details\r\n        dense\r\n        class=\"mb-3\"\r\n    />\r\n    <v-btn outlined width=\"100%\" class=\"mt-3\" @click=\"saveInfo\">Save</v-btn>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nexport default {\r\n  data: () => ({\r\n    competition: {},\r\n    types: [],\r\n    Toast: Swal.mixin({\r\n      toast: true,\r\n      position: 'top-end',\r\n      showConfirmButton: false,\r\n      timer: 1500,\r\n      timerProgressBar: true,\r\n      didOpen: (toast) => {\r\n        toast.addEventListener('mouseenter', Swal.stopTimer)\r\n        toast.addEventListener('mouseleave', Swal.resumeTimer)\r\n      },\r\n    }),\r\n    dateTimeMenu: {}\r\n  }),\r\n  created() {\r\n    this.getTypes().then(() => {})\r\n  },\r\n  methods: {\r\n    async getTypes() {\r\n      await axios.get('/competition-types/')\r\n          .then((res) => {\r\n            this.types = res.data.data\r\n          })\r\n          .catch((err) => {\r\n            console.log(err)\r\n          })\r\n    },\r\n\r\n    async saveInfo() {\r\n      let dateStart = `${this.competition.dateStart}T${this.competition.timeStart}:00`\r\n      let dateEnd = `${this.competition.dateEnd}T${this.competition.timeEnd}:00`\r\n      dateStart = new Date(dateStart)\r\n      dateEnd = new Date(dateEnd)\r\n      dateStart = dateStart.toISOString()\r\n      dateEnd = dateEnd.toISOString()\r\n\r\n      let formData = new FormData()\r\n\r\n      formData.append('nameTm', this.competition.nameTm)\r\n      formData.append('nameRu', this.competition.nameRu)\r\n      formData.append('textTm', this.competition.textTm)\r\n      formData.append('textRu', this.competition.textRu)\r\n      formData.append('locationTm', this.competition.locationTm)\r\n      formData.append('locationRu', this.competition.locationRu)\r\n      formData.append('dateStart', dateStart)\r\n      formData.append('dateEnd', dateEnd)\r\n      formData.append('typeId', this.competition.type.id)\r\n      formData.append('photo', this.competition.file)\r\n\r\n      await axios.post('/competitions/', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      })\r\n          .then(() => {\r\n            this.Toast.fire({\r\n              icon:'success',\r\n              title: 'Successfully saved'\r\n            })\r\n            this.$emit('close-nav-drawer')\r\n          })\r\n          .catch((err) => {\r\n            this.Toast.fire({\r\n              icon:'error',\r\n              title: 'Something went wrong'\r\n            })\r\n            console.log(err)\r\n            this.$emit('close-nav-drawer')\r\n          })\r\n    }\r\n\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\r\n\r\n</style>"],"mappings":"AA4LA,OAAAA,KAAA;AACA,OAAAC,IAAA;AAEA;EACAC,IAAA,EAAAA,CAAA;IACAC,WAAA;IACAC,KAAA;IACAC,KAAA,EAAAJ,IAAA,CAAAK,KAAA;MACAC,KAAA;MACAC,QAAA;MACAC,iBAAA;MACAC,KAAA;MACAC,gBAAA;MACAC,OAAA,EAAAL,KAAA;QACAA,KAAA,CAAAM,gBAAA,eAAAZ,IAAA,CAAAa,SAAA;QACAP,KAAA,CAAAM,gBAAA,eAAAZ,IAAA,CAAAc,WAAA;MACA;IACA;IACAC,YAAA;EACA;EACAC,QAAA;IACA,KAAAC,QAAA,GAAAC,IAAA;EACA;EACAC,OAAA;IACA,MAAAF,SAAA;MACA,MAAAlB,KAAA,CAAAqB,GAAA,wBACAF,IAAA,CAAAG,GAAA;QACA,KAAAlB,KAAA,GAAAkB,GAAA,CAAApB,IAAA,CAAAA,IAAA;MACA,GACAqB,KAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;MACA;IACA;IAEA,MAAAG,SAAA;MACA,IAAAC,SAAA,WAAAzB,WAAA,CAAAyB,SAAA,SAAAzB,WAAA,CAAA0B,SAAA;MACA,IAAAC,OAAA,WAAA3B,WAAA,CAAA2B,OAAA,SAAA3B,WAAA,CAAA4B,OAAA;MACAH,SAAA,OAAAI,IAAA,CAAAJ,SAAA;MACAE,OAAA,OAAAE,IAAA,CAAAF,OAAA;MACAF,SAAA,GAAAA,SAAA,CAAAK,WAAA;MACAH,OAAA,GAAAA,OAAA,CAAAG,WAAA;MAEA,IAAAC,QAAA,OAAAC,QAAA;MAEAD,QAAA,CAAAE,MAAA,gBAAAjC,WAAA,CAAAkC,MAAA;MACAH,QAAA,CAAAE,MAAA,gBAAAjC,WAAA,CAAAmC,MAAA;MACAJ,QAAA,CAAAE,MAAA,gBAAAjC,WAAA,CAAAoC,MAAA;MACAL,QAAA,CAAAE,MAAA,gBAAAjC,WAAA,CAAAqC,MAAA;MACAN,QAAA,CAAAE,MAAA,oBAAAjC,WAAA,CAAAsC,UAAA;MACAP,QAAA,CAAAE,MAAA,oBAAAjC,WAAA,CAAAuC,UAAA;MACAR,QAAA,CAAAE,MAAA,cAAAR,SAAA;MACAM,QAAA,CAAAE,MAAA,YAAAN,OAAA;MACAI,QAAA,CAAAE,MAAA,gBAAAjC,WAAA,CAAAwC,IAAA,CAAAC,EAAA;MACAV,QAAA,CAAAE,MAAA,eAAAjC,WAAA,CAAA0C,IAAA;MAEA,MAAA7C,KAAA,CAAA8C,IAAA,mBAAAZ,QAAA;QACAa,OAAA;UACA;QACA;MACA,GACA5B,IAAA;QACA,KAAAd,KAAA,CAAA2C,IAAA;UACAC,IAAA;UACAC,KAAA;QACA;QACA,KAAAC,KAAA;MACA,GACA5B,KAAA,CAAAC,GAAA;QACA,KAAAnB,KAAA,CAAA2C,IAAA;UACAC,IAAA;UACAC,KAAA;QACA;QACAzB,OAAA,CAAAC,GAAA,CAAAF,GAAA;QACA,KAAA2B,KAAA;MACA;IACA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}